<div align="center">

# Celeste Staff Meal

<img src="https://raw.githubusercontent.com/withceleste/celeste-python/main/logo.svg" width="64" height="64" alt="Celeste Logo">

**Plateforme de VÃ©rification de Commandes UberEats / Deliveroo**

VÃ©rifiez chaque commande avant de fermer le sac pour Ã©viter les erreurs de prÃ©paration.

[![Python](https://img.shields.io/badge/Python-3.12+-blue?style=for-the-badge)](https://www.python.org/)
[![License](https://img.shields.io/badge/License-Apache_2.0-red?style=for-the-badge)](LICENSE)
[![Supabase](https://img.shields.io/badge/Supabase-Integrated-green?style=for-the-badge)](https://supabase.com)
[![Status](https://img.shields.io/badge/Status-Fully%20Deployed-blue?style=for-the-badge)]()
[![Coverage](https://img.shields.io/badge/Coverage-99.57%25-orange?style=for-the-badge)]()

[Installation](#-installation) â€¢ [FonctionnalitÃ©s](#-fonctionnalitÃ©s-clÃ©s) â€¢ [Architecture](#-architecture) â€¢ [Documentation](#-documentation) â€¢ [Tests](#-tests--qualitÃ©) â€¢ [Contribuer](#-contribuer)

</div>

---

## ğŸ¯ Objectif

Ã‰viter les erreurs de prÃ©paration en vÃ©rifiant chaque commande avant de fermer le sac. ZÃ©ro article manquant, moins de rÃ©clamations, meilleures notes sur les plateformes de livraison.

<div align="center">

### ğŸš€ [**AccÃ©der Ã  l'Application â†’**](https://celeste-staff-meal.streamlit.app/)

<a href="https://celeste-staff-meal.streamlit.app/">
  <img src="https://img.shields.io/badge/ğŸŒ_Application_Live-Streamlit_Cloud-FF4B4B?style=for-the-badge&logo=streamlit&logoColor=white" alt="Application Live" />
</a>

**[https://celeste-staff-meal.streamlit.app/](https://celeste-staff-meal.streamlit.app/)**

</div>

<div align="center">
  <img src="assets/qr_ORD-25011.png" alt="Exemple de QR Code" width="250" style="margin: 10px;">
  <img src="assets/021763107240482641a02d40a43d449f07de84c480b390d940bfb_0.jpeg" alt="Exemple de Photo de Sac" width="250" style="margin: 10px;">
  <br>
  <em>Scan du QR Code â†’ Analyse de la photo du sac â†’ Validation</em>
</div>

---

## ğŸ¤ PropulsÃ© Par

<div align="center">

<img src="https://raw.githubusercontent.com/withceleste/celeste-python/main/logo.svg" width="32" height="32" alt="Celeste AI" title="Celeste AI">
<img src="https://www.google.com/s2/favicons?domain=supabase.com&sz=64" width="32" height="32" alt="Supabase" title="Supabase">
<img src="https://www.google.com/favicon.ico" width="32" height="32" alt="Google" title="Google">
<img src="https://www.google.com/s2/favicons?domain=openai.com&sz=64" width="32" height="32" alt="OpenAI" title="OpenAI">
<img src="https://www.anthropic.com/favicon.ico" width="32" height="32" alt="Anthropic" title="Anthropic">
<img src="https://mistral.ai/favicon.ico" width="32" height="32" alt="Mistral" title="Mistral">
<img src="https://cohere.com/favicon.ico" width="32" height="32" alt="Cohere" title="Cohere">
<img src="https://x.ai/favicon.ico" width="32" height="32" alt="xAI" title="xAI">
<img src="https://www.google.com/s2/favicons?domain=elevenlabs.io&sz=32" width="32" height="32" alt="ElevenLabs" title="ElevenLabs">
<img src="https://www.google.com/s2/favicons?domain=stability.ai&sz=32" width="32" height="32" alt="Stability AI" title="Stability AI">
<img src="https://www.google.com/s2/favicons?domain=lumalabs.ai&sz=32" width="32" height="32" alt="Luma" title="Luma">
<img src="https://www.google.com/s2/favicons?domain=topazlabs.com&sz=32" width="32" height="32" alt="Topaz Labs" title="Topaz Labs">
<img src="https://www.google.com/s2/favicons?domain=byteplus.com&sz=32" width="32" height="32" alt="ByteDance" title="ByteDance">

**Construit avec [Celeste AI](https://github.com/withceleste/celeste-python) â€¢ Toutes les capacitÃ©s. Tous les fournisseurs. Une interface.**

</div>

---

## âœ¨ FonctionnalitÃ©s ClÃ©s

### ğŸš€ EntiÃ¨rement DÃ©ployÃ© et Fonctionnel

Solution prÃªte pour la production avec interface utilisateur complÃ¨te, intÃ©gration de base de donnÃ©es et capacitÃ©s IA. PrÃªt Ã  l'emploi immÃ©diatement aprÃ¨s la configuration.

### ğŸ¤– 4 AI Capabilities

AlimentÃ© par **Celeste AI** avec quatre capabilities distinctes :

- **ğŸ–¼ï¸ Image Intelligence** : DÃ©tection visuelle des commandes Ã  partir de photos du sac utilisant la vision par ordinateur avancÃ©e
- **ğŸ“ Text Generation** : Explications alimentÃ©es par l'IA et insights intelligents pour le tableau de bord
- **ğŸ”Š Speech Generation** : Explications audio en plusieurs langues pour l'accessibilitÃ©
- **ğŸ¨ Image Generation** : Mode dÃ©mo pour les tests et l'entraÃ®nement sans commandes rÃ©elles

### ğŸŒ FonctionnalitÃ©s Inclusives

**Support Multi-langues** (20+ langues) :
ğŸ‡«ğŸ‡· FranÃ§ais â€¢ ğŸ‡¬ğŸ‡§ Anglais â€¢ ğŸ‡ªğŸ‡¸ Espagnol â€¢ ğŸ‡¸ğŸ‡¦ Arabe â€¢ ğŸ‡¸ğŸ‡³ Wolof â€¢ ğŸ‡²ğŸ‡± Bambara â€¢ ğŸ‡¨ğŸ‡³ Chinois Mandarin â€¢ ğŸ‡»ğŸ‡³ Vietnamien â€¢ ğŸ‡µğŸ‡¹ Portugais â€¢ ğŸ‡·ğŸ‡´ Roumain â€¢ âµ£ BerbÃ¨re/Tamazight â€¢ ğŸ‡¨ğŸ‡© Lingala â€¢ ğŸ‡°ğŸ‡ª Swahili â€¢ ğŸ‡­ğŸ‡° Cantonais â€¢ ğŸ‡¹ğŸ‡· Turc â€¢ ğŸ‡®ğŸ‡¹ Italien â€¢ ğŸ‡µğŸ‡± Polonais â€¢ ğŸ‡®ğŸ‡³ Hindi â€¢ ğŸ‡³ğŸ‡¬ Fula/Fulani â€¢ ğŸ‡³ğŸ‡¬ Hausa â€¢ ğŸ‡°ğŸ‡­ Khmer â€¢ ğŸ‡µğŸ‡° Ourdou â€¢ ğŸ‡§ğŸ‡© Bengali â€¢ ğŸ‡µğŸ‡­ Tagalog â€¢ ğŸ‡®ğŸ‡³ Tamoul

**ğŸ”Š Explications Audio** : RÃ©sultats de validation en synthÃ¨se vocale pour une utilisation mains libres et l'accessibilitÃ©

### <img src="https://www.google.com/s2/favicons?domain=supabase.com/favicon.ico&sz=64" width="20" height="20" alt="Supabase" title="Supabase"> IntÃ©gration Supabase

Persistance de donnÃ©es en temps rÃ©el avec Supabase :
- Stockage des enregistrements de validation
- Suivi de l'historique des commandes
- DonnÃ©es du tableau de bord analytique
- Infrastructure cloud scalable

### ğŸ”‘ Utilisez Vos Propres ClÃ©s API

Configurez les clÃ©s API par capacitÃ© directement dans la barre latÃ©rale de l'interface :
- Gestion des clÃ©s par capacitÃ©
- Support de plusieurs fournisseurs IA (Google, OpenAI, etc.)
- Aucune credential codÃ©e en dur
- Changement facile entre les fournisseurs

### ğŸ“Š Tableau de Bord AvancÃ©

- **MÃ©triques en Temps RÃ©el** : Tendances et comparaisons de pÃ©riodes
- **Visualisations Interactives** : Graphiques et diagrammes Plotly
- **Recommandations IA** : Insights et alertes automatiques
- **Filtrage AvancÃ©** : Par opÃ©rateur, source, type d'erreur
- **Export de DonnÃ©es** : CSV et Excel avec donnÃ©es enrichies

---

## ğŸ—ï¸ Architecture

### DÃ©composition des Composants

**Couche UI (Streamlit)**
- Interface utilisateur pour la validation des commandes
- Tableau de bord pour les analyses et insights
- Barre latÃ©rale de configuration pour les paramÃ¨tres IA
- Design responsive pour les environnements de cuisine

**Couche Service**
- Logique de validation des commandes
- Services de prÃ©diction IA
- GÃ©nÃ©ration d'explications
- Calcul des statistiques
- DÃ©tection d'alertes

**Couche Stockage (Supabase)**
- Persistance des enregistrements de validation
- Gestion de l'historique des commandes
- RequÃªtes de donnÃ©es en temps rÃ©el
- AgrÃ©gation de donnÃ©es analytiques

**IntÃ©gration IA (Celeste AI)**
- Intelligence d'image pour la dÃ©tection des commandes
- GÃ©nÃ©ration de texte pour les explications
- GÃ©nÃ©ration de parole pour l'audio
- GÃ©nÃ©ration d'image pour les dÃ©mos

### Flux de DonnÃ©es

```
1. Scan QR Code â†’ Extraction de Commande
2. Upload Image du Sac â†’ PrÃ©diction IA
3. Comparaison de Commande â†’ RÃ©sultat de Validation
4. GÃ©nÃ©ration d'Explication â†’ Texte Multi-langues + Audio
5. Stockage du RÃ©sultat â†’ Base de DonnÃ©es Supabase
6. Tableau de Bord Analytique â†’ Insights en Temps RÃ©el
```

### Pile Technologique

- **Python 3.12+** : Python moderne avec annotations de type
- **Streamlit** : Framework d'interface web interactive
- **Celeste AI** : IntÃ©gration IA multi-capacitÃ©s
- **Supabase** : Base de donnÃ©es PostgreSQL avec fonctionnalitÃ©s temps rÃ©el
- **Plotly** : Visualisations de donnÃ©es interactives
- **Pydantic** : Validation et sÃ©rialisation de donnÃ©es
- **Pillow** : Traitement d'images
- **Pandas** : Analyse et manipulation de donnÃ©es
- **QRCode** : GÃ©nÃ©ration et scan de codes QR

---

## ğŸš€ Installation

### PrÃ©requis

- Python 3.12 ou supÃ©rieur
- Gestionnaire de paquets [UV](https://github.com/astral-sh/uv)
- Compte Supabase (niveau gratuit disponible)
- ClÃ©s API des fournisseurs IA (Google/OpenAI/etc. - optionnel, peut Ãªtre configurÃ© dans l'UI)

### Configuration Ã‰tape par Ã‰tape

1. **Cloner le dÃ©pÃ´t**
```bash
git clone https://github.com/Kamilbenkirane/celeste-staff-meal.git
cd celeste-staff-meal
```

2. **Installer les dÃ©pendances**
```bash
make sync
```

3. **Configurer les variables d'environnement**

CrÃ©ez un fichier `.env` Ã  la racine du projet :

```bash
# Configuration Supabase (Requis)
SUPABASE_URL=your_supabase_project_url
SUPABASE_KEY=your_supabase_anon_key

# ClÃ©s API des Fournisseurs IA (Optionnel - peut Ãªtre configurÃ© dans l'UI)
GOOGLE_API_KEY=your_google_api_key
OPENAI_API_KEY=your_openai_api_key
```

**Note** : Les clÃ©s API peuvent Ã©galement Ãªtre configurÃ©es directement dans la barre latÃ©rale de l'application UI, donc les variables d'environnement sont optionnelles pour les fournisseurs IA.

4. **Configurer Supabase**

ExÃ©cutez les migrations dans `supabase/migrations/` pour crÃ©er les tables requises :
- Table `validation_records`
- Table `orders`

Vous pouvez utiliser Supabase CLI ou l'interface web pour appliquer les migrations.

### ExÃ©cution

**DÃ©marrer l'application :**

```bash
uv run streamlit run app.py
```

L'application sera disponible sur `http://localhost:8501`

---

## ğŸ› ï¸ Technologies UtilisÃ©es

| CatÃ©gorie | Technologie | Objectif |
|----------|-----------|---------|
| **Langage** | Python 3.12+ | Langage de programmation principal |
| **Framework UI** | Streamlit | Interface web interactive |
| **Plateforme IA** | Celeste AI | IntÃ©gration IA multi-capacitÃ©s |
| **Base de DonnÃ©es** | Supabase | Base de donnÃ©es PostgreSQL avec fonctionnalitÃ©s temps rÃ©el |
| **Visualisation** | Plotly | Graphiques et diagrammes interactifs |
| **Validation de DonnÃ©es** | Pydantic | ModÃ¨les de donnÃ©es type-safe |
| **Traitement d'Images** | Pillow | Manipulation et traitement d'images |
| **Analyse de DonnÃ©es** | Pandas | Manipulation et analyse de donnÃ©es |
| **Codes QR** | QRCode + zxing-cpp | GÃ©nÃ©ration et scan de codes QR |
| **Export Excel** | openpyxl | GÃ©nÃ©ration de fichiers Excel |
| **Gestionnaire de Paquets** | UV | Gestion rapide de paquets Python |

---

## ğŸ“‹ FonctionnalitÃ©s SupplÃ©mentaires

- **Lecture de Commandes** : OCR depuis le ticket ou intÃ©gration UberEats/Deliveroo
- **Analyse Visuelle** : DÃ©tection des articles dans le sac (boÃ®tes, boissons, sauces)
- **Validation** : Ã‰cran clair "Manquant / OK" avec liste des articles manquants
- **Tableau de Bord Statistiques** :
  - MÃ©triques avec tendances et comparaisons de pÃ©riodes
  - Visualisations interactives (graphiques Plotly)
  - Analyse par opÃ©rateur et par source (UberEats/Deliveroo)
  - Recommandations automatiques alimentÃ©es par l'IA
  - SystÃ¨me d'alertes pour la dÃ©tection d'anomalies
  - Filtres avancÃ©s (opÃ©rateur, source, type d'erreur)
  - Export CSV et Excel avec donnÃ©es enrichies
- **GÃ©nÃ©rateur de QR Code** : Mode dÃ©mo pour les tests sans commandes rÃ©elles

---

## ğŸ Avantages

- âœ… RÃ©duction des rÃ©clamations "article manquant"
- âœ… Meilleures notes sur UberEats / Deliveroo
- âœ… Moins de stress Ã  l'expÃ©dition
- âœ… TraÃ§abilitÃ© complÃ¨te
- âœ… Support multi-langues pour des Ã©quipes diversifiÃ©es
- âœ… Retour audio pour une utilisation mains libres
- âœ… Analyses et insights en temps rÃ©el

---

## âš™ï¸ Contraintes

- VÃ©rification en moins de 5 secondes
- Interface utilisable avec les mains sales (grands boutons, texte minimal)
- Compatible avec smartphone/tablette simple
- Aucune configuration compliquÃ©e
- Fonctionne hors ligne pour la validation de base (nÃ©cessite internet pour les fonctionnalitÃ©s IA)

---

## ğŸ§ª DÃ©veloppement

```bash
make test      # ExÃ©cuter les tests
make lint      # ExÃ©cuter le linting
make format    # Formater le code
make typecheck # ExÃ©cuter la vÃ©rification de types
make ci        # ExÃ©cuter le pipeline CI complet
make security  # Scan de sÃ©curitÃ©
```

---

## ğŸ§ª Tests & QualitÃ©

### Couverture de Tests

**99,57% de couverture de code** - Suite de tests complÃ¨te garantissant la fiabilitÃ© et la qualitÃ©.

```bash
make test  # ExÃ©cuter les tests avec rapport de couverture
```

**RÃ©partition de la Couverture :**
- âœ… `staff_meal/__init__.py` : 100%
- âœ… `staff_meal/database.py` : 100%
- âœ… `staff_meal/models.py` : 100%
- âœ… `staff_meal/order_storage.py` : 100%
- âœ… `staff_meal/qr.py` : 100%
- âœ… `staff_meal/storage.py` : 98%

**90 tests unitaires** couvrant toutes les fonctionnalitÃ©s principales incluant :
- OpÃ©rations de base de donnÃ©es et intÃ©gration Supabase
- Logique de validation et comparaison des commandes
- GÃ©nÃ©ration et dÃ©codage de codes QR
- Services de prÃ©diction et d'explication IA
- ModÃ¨les de donnÃ©es et sÃ©rialisation
- Analyses et insights du tableau de bord

Tous les tests passent avec **exigence minimale de couverture de 80%** appliquÃ©e.

---

## ğŸ“š Documentation

Documentation complÃ¨te disponible dans le dossier `docs/` :

- **[Architecture du systÃ¨me](docs/architecture.md)** : Diagrammes d'architecture, flux de donnÃ©es, composants et sÃ©quences
- **[Guide utilisateur Dashboard](docs/dashboard-guide.md)** : Guide complet pour utiliser le tableau de bord analytique
- **[Cas d'usage avancÃ©s](docs/use-cases.md)** : ScÃ©narios dÃ©taillÃ©s et cas d'usage rÃ©els (validation quotidienne, analyse de performances, formation, intÃ©grations, multi-restaurants)

### Documentation pour dÃ©veloppeurs

- **[Guide de contribution](CONTRIBUTING.md)** : Standards de code, processus de dÃ©veloppement, tests et pull requests
- **[Standards de dÃ©veloppement](AGENTS.md)** : Guidelines techniques dÃ©taillÃ©es pour le dÃ©veloppement

---

## ğŸ¤ Contribuer

Les contributions sont les bienvenues ! Veuillez consulter le [Guide de contribution](CONTRIBUTING.md) pour :

- Standards de code et conventions
- Processus de dÃ©veloppement local
- Guide des tests (couverture minimale 80%)
- Processus de Pull Request

**Types de contributions** :
- ğŸ› Rapports de bugs
- ğŸ’¡ Suggestions de fonctionnalitÃ©s
- ğŸ“ AmÃ©lioration de la documentation
- ğŸ”§ Code (corrections et nouvelles fonctionnalitÃ©s)
- ğŸ§ª Tests

---

## ğŸ“„ Licence

Licence Apache 2.0 â€“ voir [LICENSE](LICENSE) pour les dÃ©tails.

---

<div align="center">

Fait avec â¤ï¸ pour les restaurants

</div>
